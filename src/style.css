/* === Reset & Base === */
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  height: 100vh;
  background-color: #000; /* 默认黑色背景防止白屏闪烁 */
  overflow: hidden;
}

/* === 布局结构 === */
#app {
  height: 100vh;
  width: 100vw;
  margin: 0;
  padding: 0;
}

/* .app-container 是 App.vue 里的根元素，它才是真正的布局容器 */
.app-container {
  display: flex;      /* 开启 Flex 布局 */
  flex-direction: column; /* 垂直排列：菜单在上，视频在下 */
  height: 100%;       /* 占满父容器高度 */
  width: 100%;
  overflow: hidden;
}

/* === 顶部菜单栏 (样式移植) === */
#menubar {
  /* 固定高度，不再使用 fixed定位，改用 Flex 布局自然排列 */
  flex: 0 0 40px; 
  padding: 0 12px;
  border-bottom: 1px solid #ddd;
  background-color: #ffffff;

  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: center;

  -webkit-app-region: drag; /* 允许拖拽窗口 */
  z-index: 10;
  
  transition: margin-top 0.18s ease-out; /* 配合全屏隐藏的动画 */
}

/* 网页全屏时隐藏菜单栏的逻辑将通过 Vue 动态 class 实现 */
body.web-fullscreen #menubar {
  margin-top: -40px; /* 向上收起 */
}
body.web-fullscreen.menu-visible #menubar {
  margin-top: 0;
}

#menubar, #menubar * {
  user-select: none;
}

.menu-group {
  display: flex;
  gap: 8px;
  align-items: center;
}
.menu-group.left { justify-self: flex-start; }
.menu-group.center { justify-self: center; }
.menu-group.right { justify-self: flex-end; }

.menu-item {
  border: none;
  background: transparent;
  padding: 4px 10px;
  font-size: 13px;
  border-radius: 4px;
  cursor: pointer;
  -webkit-app-region: no-drag;
  color: inherit; /* 继承父级颜色，方便主题切换 */
}
.menu-item:focus { outline: none; }
.menu-item:hover { background-color: rgba(0,0,0,0.05); }
.menu-item:active { background-color: rgba(0,0,0,0.1); }

.window-btn {
  padding: 2px 8px;
  font-size: 12px;
}

/* === 播放区域 === */
#videoContainer {
  flex: 1; /* 自动填满剩余空间 */
  position: relative;
  background-color: #000;
  overflow: hidden;
}

/* Vue 中的 Webview 样式 */
webview {
  width: 100%;
  height: 100%;
  border: none;
  display: flex; /* 修复某些情况下 webview 0高度的问题 */
}

/* === Overlay & Modal 通用样式 (移植) === */
.overlay-mask {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 50;
  /* Vue transition */
}

.overlay-card {
  background: #ffffff;
  border-radius: 8px;
  padding: 16px 20px;
  min-width: 360px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  font-size: 13px;
  /* 针对书签列表的特殊尺寸 */
  width: 800px;
  height: 600px;
  max-height: 90vh;
  max-width: 90vw;
}

/* === Theme Styles (从 themes.css 移植) === */

/* 深色模式 (Dark) */
body.theme-dark #menubar {
  background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
  border-bottom: 1px solid #404040;
  color: #ffffff;
}
body.theme-dark .menu-item:hover { background: rgba(255,255,255,0.1); }
body.theme-dark .overlay-card {
  background: rgba(30, 30, 30, 0.95);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255,255,255,0.1);
  color: #ffffff;
}
body.theme-dark .menu-item { color: #fff; }

/* 浅色模式 (Light) */
body.theme-light #menubar {
  background: #ffffff;
  border-bottom: 1px solid #e8e8e8;
}
body.theme-light .menu-item {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

/* 科技蓝 (Tech) */
body.theme-tech #menubar {
  background: linear-gradient(90deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
  border-bottom: 1px solid rgba(0, 188, 212, 0.3);
  color: #ffffff;
}
body.theme-tech .menu-item {
  color: #00bcd4;
  border: 1px solid rgba(0, 188, 212, 0.3);
}

/* === Vue Transition 动画定义 === */

/* 1. Fade (淡入淡出) */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.25s ease;
}
.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* 2. Zoom (弹窗缩放进场) - 让弹窗更有质感 */
.zoom-enter-active,
.zoom-leave-active {
  transition: all 0.3s cubic-bezier(0.19, 1, 0.22, 1);
}
.zoom-enter-from,
.zoom-leave-to {
  opacity: 0;
  transform: scale(0.92); /* 稍微缩小一点开始放大 */
}

/* === 滚动条美化 (全局生效) === */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}
::-webkit-scrollbar-track {
  background: transparent;
}
::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
  border-radius: 10px;
}
::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.3);
}
/* 深色模式滚动条适配 */
body.theme-dark ::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
}
body.theme-dark ::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}